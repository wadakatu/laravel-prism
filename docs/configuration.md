# Configuration

Laravel Spectrum provides extensive configuration options to customize the documentation generation process.

## Publishing Configuration

To customize the configuration, publish the config file:

```bash
php artisan vendor:publish --tag=spectrum-config
```

## Configuration Options

```php
// config/spectrum.php
return [
    // API Information
    'title' => env('APP_NAME', 'Laravel') . ' API',
    'version' => '1.0.0',
    'description' => 'API documentation generated by Laravel Spectrum',
    
    // Route Patterns - Define which routes to document
    'route_patterns' => [
        'api/*',      // All API routes
        'api/v1/*',   // Versioned APIs
        'api/v2/*',
    ],
    
    // Excluded Routes - Skip documentation for these
    'excluded_routes' => [
        'api/health',
        'api/ping',
    ],
    
    // Tag Mappings - Organize endpoints into logical groups
    'tags' => [
        'api/v1/auth/*' => 'Authentication',
        'api/v1/users/*' => 'User Management',
        'api/v1/products/*' => 'Products',
        'api/v1/orders/*' => 'Orders',
        'api/v1/admin/*' => 'Administration',
    ],
    
    // Authentication - Configure security schemes
    'authentication' => [
        'global' => [
            'enabled' => false,  // Enable for all routes
            'scheme' => [
                'type' => 'http',
                'scheme' => 'bearer',
                'bearerFormat' => 'JWT',
            ],
        ],
        'custom_schemes' => [
            'api-key' => [
                'type' => 'apiKey',
                'in' => 'header',
                'name' => 'X-API-Key',
            ],
        ],
    ],
    
    // Performance - Cache analysis results
    'cache' => [
        'enabled' => env('SPECTRUM_CACHE_ENABLED', true),
        'ttl' => null,  // Cache forever
    ],
    
    // Watch Mode - Live preview settings
    'watch' => [
        'paths' => [
            app_path('Http/Controllers'),
            app_path('Http/Requests'),
            app_path('Http/Resources'),
            base_path('routes'),
        ],
        'debounce' => 300,  // Milliseconds
    ],
    
    // Transformer Support
    'transformers' => [
        'enabled' => [
            'laravel-resource' => true,
            'fractal' => true,
        ],
    ],
];
```

## Advanced Configuration

### Authentication Patterns

Apply authentication to specific route patterns:

```php
'authentication' => [
    'patterns' => [
        'api/admin/*' => [
            'scheme' => [
                'type' => 'http',
                'scheme' => 'bearer',
            ],
            'required' => true,
        ],
        'api/public/*' => [
            'required' => false,
        ],
    ],
],
```

### Custom Middleware Mapping

Map your custom middleware to OpenAPI security schemes:

```php
'authentication' => [
    'custom_schemes' => [
        'custom-auth' => [
            'type' => 'apiKey',
            'in' => 'header',
            'name' => 'X-Custom-Token',
            'description' => 'Custom API token',
        ],
    ],
],
```

### OAuth2 Configuration

For Laravel Passport integration:

```php
'authentication' => [
    'oauth2' => [
        'authorization_url' => env('APP_URL').'/oauth/authorize',
        'token_url' => env('APP_URL').'/oauth/token',
        'refresh_url' => env('APP_URL').'/oauth/token',
        'scopes' => [
            'read' => 'Read access',
            'write' => 'Write access',
            'admin' => 'Administrative access',
        ],
    ],
],
```

### Response Transformers

Configure support for different response transformation libraries:

```php
'transformers' => [
    'fractal' => [
        'default_serializer' => 'array', // array, data_array, json_api
        'include_handling' => 'optional_properties',
        'pagination_schema' => [
            'type' => 'object',
            'properties' => [
                'data' => ['type' => 'array'],
                'meta' => [
                    'type' => 'object',
                    'properties' => [
                        'pagination' => [
                            'type' => 'object',
                            'properties' => [
                                'total' => ['type' => 'integer'],
                                'count' => ['type' => 'integer'],
                                'per_page' => ['type' => 'integer'],
                                'current_page' => ['type' => 'integer'],
                                'total_pages' => ['type' => 'integer'],
                            ],
                        ],
                    ],
                ],
            ],
        ],
    ],
],
```

### Example Generation

Configure how example values are generated:

```php
'example_generation' => [
    // Enable/disable Faker for realistic examples
    'use_faker' => env('SPECTRUM_USE_FAKER', true),
    
    // Set locale for region-specific data (e.g., 'ja_JP', 'de_DE', 'fr_FR')
    'faker_locale' => env('SPECTRUM_FAKER_LOCALE', 'en_US'),
    
    // Set seed for consistent example generation (useful for testing)
    'faker_seed' => env('SPECTRUM_FAKER_SEED', null),
    
    // Define global custom generators
    'custom_generators' => [
        // 'status' => fn($faker) => $faker->randomElement(['active', 'inactive']),
        // 'priority' => fn($faker) => $faker->randomElement(['low', 'medium', 'high']),
    ],
],
```

### Lumen Compatibility

Enable Lumen-specific features:

```php
'validation' => [
    'lumen' => [
        'enabled' => env('SPECTRUM_LUMEN_MODE', false),
        'default_middleware' => ['api'],
    ],
],
```

### Performance Optimization

Configure caching for large projects:

```php
'cache' => [
    'enabled' => env('SPECTRUM_CACHE_ENABLED', true),
    'directory' => storage_path('app/spectrum/cache'),
    'ttl' => env('SPECTRUM_CACHE_TTL', null), // null = forever
    'watch_files' => [
        base_path('composer.json'),
        base_path('composer.lock'),
    ],
],
```